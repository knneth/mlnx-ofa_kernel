From: Lama Kayal <lkayal@nvidia.com>
Subject: [PATCH] BACKPORT: drivers/net/ethernet/mellanox/mlx5/core/en/rx_res.h

---
 .../ethernet/mellanox/mlx5/core/en/rx_res.h   | 29 +++++++++++++++----
 1 file changed, 23 insertions(+), 6 deletions(-)

--- a/drivers/net/ethernet/mellanox/mlx5/core/en/rx_res.h
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en/rx_res.h
@@ -48,12 +48,23 @@ void mlx5e_rx_res_xsk_update(struct mlx5
 
 /* Configuration API */
 void mlx5e_rx_res_rss_set_indir_uniform(struct mlx5e_rx_res *res, unsigned int nch);
-void mlx5e_rx_res_rss_get_rxfh(struct mlx5e_rx_res *res, u32 rss_idx,
-			       u32 *indir, u8 *key, u8 *hfunc,
-			       bool *symmetric);
+#ifdef HAVE_CORE_TRACKS_CUSTOM_RSS_CONTEXTS
+void
+#else
+int
+#endif
+mlx5e_rx_res_rss_get_rxfh(struct mlx5e_rx_res *res, u32 rss_idx,
+			       u32 *indir, u8 *key, u8 *hfunc
+#ifdef HAVE_RXH_XFRM_SYM_OR_XOR
+				, bool *symmetric
+#endif
+				);
 int mlx5e_rx_res_rss_set_rxfh(struct mlx5e_rx_res *res, u32 rss_idx,
-			      const u32 *indir, const u8 *key, const u8 *hfunc,
-			      const bool *symmetric);
+			      const u32 *indir, const u8 *key, const u8 *hfunc
+#ifdef HAVE_RXH_XFRM_SYM_OR_XOR
+			      , const bool *symmetric
+#endif
+			      );
 
 int mlx5e_rx_res_rss_get_hash_fields(struct mlx5e_rx_res *res, u32 rss_idx,
 				     enum mlx5_traffic_types tt);
@@ -62,7 +73,13 @@ int mlx5e_rx_res_rss_set_hash_fields(str
 int mlx5e_rx_res_packet_merge_set_param(struct mlx5e_rx_res *res,
 					struct mlx5e_packet_merge_param *pkt_merge_param);
 
-int mlx5e_rx_res_rss_init(struct mlx5e_rx_res *res, u32 rss_idx, unsigned int init_nch);
+int mlx5e_rx_res_rss_init(struct mlx5e_rx_res *res,
+#ifdef HAVE_CORE_TRACKS_CUSTOM_RSS_CONTEXTS
+			  u32 rss_idx
+#else
+			  u32 *rss_idx
+#endif
+			  , unsigned int init_nch);
 int mlx5e_rx_res_rss_destroy(struct mlx5e_rx_res *res, u32 rss_idx);
 int mlx5e_rx_res_rss_cnt(struct mlx5e_rx_res *res);
 int mlx5e_rx_res_rss_index(struct mlx5e_rx_res *res, struct mlx5e_rss *rss);
