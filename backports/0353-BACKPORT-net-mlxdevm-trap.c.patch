From: Oren Sidi <osidi@nvidia.com>
Subject: [PATCH] BACKPORT: net/mlxdevm/trap.c

Change-Id: I59c9f7c67724eb3011a5ba4560619abef741fab9
---
 net/mlxdevm/trap.c | 4 ++++
 1 file changed, 4 insertions(+)

--- a/net/mlxdevm/trap.c
+++ b/net/mlxdevm/trap.c
@@ -1184,7 +1184,9 @@ mlxdevm_trap_group_notify(struct mlxdevm
 		return;
 	}
 
+#ifdef HAVE_DEVLINK_NOTIFICATIONS_FILTERING
 	mlxdevm_nl_notify_send(mlxdevm, msg);
+#endif
 }
 #ifdef HAVE_BLOCKED_DEVLINK_CODE
 
@@ -1246,7 +1248,9 @@ static void mlxdevm_trap_notify(struct m
 		return;
 	}
 
+#ifdef HAVE_DEVLINK_NOTIFICATIONS_FILTERING
 	mlxdevm_nl_notify_send(mlxdevm, msg);
+#endif
 }
 #ifdef HAVE_BLOCKED_DEVLINK_CODE
 
